# Migration `20200510130851-change-rules-to-json`

This migration has been generated by Robert Westbury at 5/10/2020, 1:08:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Field" (
    "id" SERIAL,
    "name" text  NOT NULL ,
    "required" boolean  NOT NULL ,
    "rules" text  NOT NULL DEFAULT '{}',
    "schemaId" integer  NOT NULL ,
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."Field" ADD FOREIGN KEY ("schemaId")REFERENCES "public"."Schema"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200509120844-add-defaults..20200510130851-change-rules-to-json
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -49,21 +49,31 @@
   schema        Schema
 }
 model Schema {
-  id     Int    @default(autoincrement()) @id
+  id     Int     @default(autoincrement()) @id
   formId String
-  form   Form   @relation(fields: [formId], references: [id])
+  form   Form    @relation(fields: [formId], references: [id])
+  field  Field[]
 }
+model Field {
+  id       Int     @default(autoincrement()) @id
+  schemaId Int
+  schema   Schema  @relation(fields: [schemaId], references: [id])
+  name     String
+  required Boolean
+  rules    String  @default("{}")
+}
+
 model Notifications {
   id              Int     @default(autoincrement()) @id
   formId          String
   form            Form    @relation(fields: [formId], references: [id])
   // Emails
   emailsEnabled   Boolean @default(false)
   emails          String  @default("")
-  // Webhooks
+  // Webhooks    
   webhooksEnabled Boolean @default(false)
   webhooks        String  @default("")
 }
```


