# Migration `20200509120727-add-schema`

This migration has been generated by Robert Westbury at 5/9/2020, 12:07:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Schema" (
    "formId" text  NOT NULL ,
    "id" SERIAL,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Schema_formId" ON "public"."Schema"("formId")

ALTER TABLE "public"."Schema" ADD FOREIGN KEY ("formId")REFERENCES "public"."Form"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200509115005-remove-migration..20200509120727-add-schema
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -44,10 +44,18 @@
   security      Security
   notifications Notifications
   hiddenFields  String        @default("")
   mappedFields  String        @default("")
+  submission    Submission[]
+  schema        Schema
 }
+model Schema {
+  id     Int    @default(autoincrement()) @id
+  formId String
+  form   Form   @relation(fields: [formId], references: [id])
+}
+
 model Notifications {
   id              Int     @default(autoincrement()) @id
   formId          String
   form            Form    @relation(fields: [formId], references: [id])
@@ -98,5 +106,5 @@
   subject     String @default("")
   body        String @default("")
   formId      String
   form        Form   @relation(fields: [formId], references: [id])
-}
+}
```


