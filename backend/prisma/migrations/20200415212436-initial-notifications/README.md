# Migration `20200415212436-initial-notifications`

This migration has been generated by Robert Westbury at 4/15/2020, 9:24:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Notifications" (
    "emails" text []  ,
    "formId" text  NOT NULL ,
    "id" SERIAL,
    "webhooks" text []  ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Notifications_formId" ON "public"."Notifications"("formId")

ALTER TABLE "public"."Notifications" ADD FOREIGN KEY ("formId")REFERENCES "public"."Form"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200414222605-remove-uploads..20200415212436-initial-notifications
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -32,15 +32,24 @@
   note      String   @default("")
 }
 model Form {
-  id         String      @id
-  ownerId    String
-  owner      User        @relation(fields: [ownerId], references: [id])
-  name       String
-  validation Validation?
+  id            String         @id
+  ownerId       String
+  owner         User           @relation(fields: [ownerId], references: [id])
+  name          String
+  validation    Validation?
+  notifications Notifications?
 }
+model Notifications {
+  id       Int      @default(autoincrement()) @id
+  emails   String[]
+  webhooks String[]
+  formId   String
+  form     Form     @relation(fields: [formId], references: [id])
+}
+
 model ValidationRule {
   id           Int        @default(autoincrement()) @id
   field        String
   validator    String
```


