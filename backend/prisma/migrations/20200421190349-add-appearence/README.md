# Migration `20200421190349-add-appearence`

This migration has been generated by Robert Westbury at 4/21/2020, 7:03:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Appearance" (
    "formId" text  NOT NULL ,
    "id" SERIAL,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Appearance_formId" ON "public"."Appearance"("formId")

ALTER TABLE "public"."Appearance" ADD FOREIGN KEY ("formId")REFERENCES "public"."Form"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."Notifications";

DROP TYPE "EmailNotificationSetting"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200420124721-fix..20200421190349-add-appearence
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -33,18 +33,24 @@
   note      String   @default("")
 }
 model Form {
-  id            String         @id
+  id            String        @id
   ownerId       String
-  owner         User           @relation(fields: [ownerId], references: [id])
-  collaborators User[]         @relation("collaboratingForms", references: [id])
+  owner         User          @relation(fields: [ownerId], references: [id])
+  collaborators User[]        @relation("collaboratingForms", references: [id])
   name          String
   validation    Validation?
-  notifications Notifications?
   confirmation  Confirmation?
+  appearance    Appearance
 }
+model Appearance {
+  id     Int    @default(autoincrement()) @id
+  formId String
+  form   Form   @relation(fields: [formId], references: [id])
+}
+
 model Confirmation {
   id          Int    @default(autoincrement()) @id
   field       String @default("")
   fromName    String @default("")
@@ -54,21 +60,8 @@
   formId      String
   form        Form   @relation(fields: [formId], references: [id])
 }
-enum EmailNotificationSetting {
-  ALL
-  OWNER
-  NONE
-}
-
-model Notifications {
-  id     Int                      @default(autoincrement()) @id
-  email  EmailNotificationSetting @default(NONE)
-  formId String
-  form   Form                     @relation(fields: [formId], references: [id])
-}
-
 model ValidationRule {
   id           Int        @default(autoincrement()) @id
   field        String
   validator    String
```


